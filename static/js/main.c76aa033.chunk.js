(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(t,e,n){},112:function(t,e,n){},113:function(t,e,n){},116:function(t,e,n){},117:function(t,e,n){},118:function(t,e,n){},119:function(t,e,n){"use strict";n.r(e);n(71);var a=n(0),r=n.n(a),o=n(68),i=n.n(o),s=(n(111),n(2)),c=n(3),u=n(5),l=n(4),d=n(6),p=(n(112),n(46)),h=n(7),g=n(69);n(113);var m=function(t){return t*(2-t)};var f=function(t,e){if(t){var n,a,r=t.startTime,o=t.duration,i=t.startCoord,s=i.x,c=i.y,u=t.endCoord,l=u.x,d=u.y,p=t.timingFunc,h=t.nodeStyle,g=l-s,m=d-c,f=null;return f=window.requestAnimationFrame(function t(i){a=o-(n=(n=i-r)>=0?n:0);var u=n/o,v=p(u)*g,y=p(u)*m;if(h.transform="translate3d(".concat(s+v,"px, ").concat(c+y,"px, ",0,"px)"),u>=1)return h.transform="translate3d(".concat(l,"px, ").concat(d,"px, ",0,"px)"),n=o,a=0,void(e&&e());f=window.requestAnimationFrame(t)}),{cancel:function(){f&&(window.cancelAnimationFrame(f),f=null)},getPassedTime:function(){return n},getTimeLeft:function(){return a}}}},v=function(t){return new RegExp(t.map(function(t){return t.source}).join(""))};function y(t){var e=new RegExp("(\\s*-?(((?!0)\\d+(?:\\.\\d+)?|0?\\.\\d+|)px{1}|0(px)?)\\s*,?){1,3}");if(!v([/translate/,/(3d|[XYZ])?/,/\(/,e,/\)$/]).test(t))return null;var n=0,a=0,r=0,o=t.match(/(?:3d|[XYZ])?(?=\()/)[0],i=t.match(/-?(\d+(?:\.\d+)?|\.\d+)(?!d)/g);if("X"===o){if(1!==i.length)return null;n=i[0]}else if("Y"===o){if(1!==i.length)return null;a=i[0]}else if("Z"===o){if(1!==i.length)return null;r=i[0]}else{if(""===o&&i.length>2)return null;r=i[0];var s=i[0];n=void 0===s?0:s;var c=i[1];a=void 0===c?0:c;var u=i[2];r=void 0===u?0:u}return{x:+n,y:+a,z:+r}}var w=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=t.y,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.x,o=a.y;return void 0!==e&&void 0!==n&&void 0!==r&&void 0!==o?Math.sqrt(Math.pow(r-e,2)+Math.pow(o-n,2)):null},b=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(o)))).state={transitionTime:0,transform:"translate3d(".concat(0,"px, ",0,"px, 0)"),prevIndex:null},n.sloppyClick=!0,n.hasDragged=!1,n.isDragging=!1,n.longTouchTimeoutID=null,n.longTouchWait=200,n.moveTriggerDelta=3,n.startGestureCoord=null,n.draggedOnRAFTranslate=null,n.routeWaypointRef=r.a.createRef(),n.waypointRef=r.a.createRef(),n.buttonRef=r.a.createRef(),n.iconRef=r.a.createRef(),n.isPointerSupported=Boolean(window.PointerEvent),n.scrollingElement=document.scrollingElement||document.documentElement,n._isMounted=!1,n.updateBaseRect=function(){var t=n.routeWaypointRef.current.getBoundingClientRect();n.baseRect={top:t.top+n.scrollingElement.scrollTop,bottom:t.bottom+n.scrollingElement.scrollTop,left:t.left+n.scrollingElement.scrollLeft,right:t.right+n.scrollingElement.scrollLeft},n.props.setBaseRect(n.props.index,n.baseRect)},n.handleButtonClick=function(t){n.props.isTransitioning||(t.preventDefault(),n.cancelLongTouch(),n.props.handleDelete(n.props.state.id))},n.getCurrGesturePageCoord=function(t){return t.touches&&t.changedTouches[0]?{x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY}:{x:t.pageX,y:t.pageY}},n.dragUpdate=function(){if(n._isMounted){var t={x:n.currGestureCoord.x-n.startGestureCoord.x,y:n.currGestureCoord.y-n.startGestureCoord.y};n.dragAnimating(t),n.props.updateWaypoints(t)}},n.updateWaypointStyle=function(t,e){var a={transition:"transform ".concat(e,"ms ease"),WebkitTransition:"-webkit-transform ".concat(e,"ms ease"),transform:t,WebkitTransform:t,msTransform:t};Object.assign(n.waypointRef.current.style,a)},n.dragAnimating=function(t){var e=t.x,a=t.y,r="translate3d(".concat(e,"px, ").concat(a,"px, 0)");n.updateWaypointStyle(r,0)},n.cancelLongTouch=function(){window.clearTimeout(n.longTouchTimeoutID),n.longTouchTimeoutID=null},n.handleGestureStart=function(t){n.props.isTransitioning||n.isDragging||n.hasDragged||(t.preventDefault(),t.touches&&t.touches.length>1||(n.hasGestureStarted=!0,n.startGestureCoord=n.getCurrGesturePageCoord(t),n.currGestureCoord=n.startGestureCoord,n.isPointerSupported?t.currentTarget.setPointerCapture(t.pointerId):(document.addEventListener("mousemove",n.handleGestureMove,!0),document.addEventListener("mouseup",n.handleGestureEnd,!0)),n.longTouchTimeoutID=window.setTimeout(function(){n.isDragging=!0,n.props.setDragged(n.props.index)},n.longTouchWait)))},n.handleGestureMove=function(t){if(n.hasGestureStarted){if(n.currGestureCoord=n.getCurrGesturePageCoord(t),n.sloppyClick)if(w(n.startGestureCoord,n.currGestureCoord)<=n.moveTriggerDelta)return;n.sloppyClick=!1,n.isDragging?n.props.isTransitioning&&(t.preventDefault(),n.dragUpdateThrottled()):n.cancelLongTouch()}},n.handleGestureEnd=function(t){if(n.hasGestureStarted=!1,!n.hasDragged&&(t.preventDefault(),!(t.touches&&t.touches.length>0)))if(n.isPointerSupported?t.currentTarget.releasePointerCapture(t.pointerId):(document.removeEventListener("mousemove",n.handleGestureMove,!0),document.removeEventListener("mouseup",n.handleGestureEnd,!0)),n.sloppyClick=!0,n.isDragging||n.hasDragged){n.dragUpdateThrottled.cancel(),n.isDragging=!1,n.hasDragged=!0;var e=n.props.draggedCurrRect.top-n.baseRect.top,a=n.props.state.transitionTime,r=y(n.waypointRef.current.style.transform),o={x:0,y:e},i={startTime:performance.now(),duration:a,startCoord:r,endCoord:o,timingFunc:m,nodeStyle:n.waypointRef.current.style};f(i,function(){var t="translate3d(".concat(0,"px, ",0,"px, 0)");n.updateWaypointStyle(t,0),n.props.handleMoveEnd()})}else n.cancelLongTouch()},n.handleGesture=n.isPointerSupported?{onPointerDown:n.handleGestureStart,onPointerMove:n.handleGestureMove,onPointerUp:n.handleGestureEnd,onPointerCancel:n.handleGestureEnd}:{onMouseDown:n.handleGestureStart,onTouchMove:n.handleGestureMove,onTouchEnd:n.handleGestureEnd},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.dragUpdateThrottled=function(t){var e=null,n=null,a=function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];n=r,e||(e=requestAnimationFrame(function(){e=null,t.apply(void 0,Object(h.a)(n))}))};return a.cancel=function(){e&&(window.cancelAnimationFrame(e),e=null)},a}(this.dragUpdate),this.buttonRef.current.addEventListener("touchstart",this.handleButtonClick,!0),this.isPointerSupported||this.iconRef.current.addEventListener("touchstart",this.handleGestureStart),this.updateBaseRect(),window.addEventListener("resize",this.updateBaseRect)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,window.removeEventListener("resize",this.updateBaseRect)}},{key:"shouldComponentUpdate",value:function(t,e){return!(this.props.draggedCurrRect===t.draggedCurrRect&&this.props.state.transform===t.state.transform&&this.state.transform===e.transform&&this.props.index===t.index&&(!this.isDragging&&!this.hasDragged||t.isTransitioning===this.props.isTransitioning))}},{key:"componentDidUpdate",value:function(t,e){if(this.props.index!==t.index&&(this.rafTransition&&(window.cancelAnimationFrame(this.rafTransition),this.rafTransition=null),this.updateBaseRect()),this.hasDragged&&!this.props.isTransitioning&&t.isTransitioning!==this.props.isTransitioning&&(this.hasDragged=!1),t.state.transform!==this.props.state.transform&&!this.isDragging&&!this.hasDragged&&this.props.isTransitioning){this.draggedOnRAFTranslate&&this.draggedOnRAFTranslate.cancel();var n=this.props.state.transitionTime,a=this.draggedOnRAFTranslate?this.draggedOnRAFTranslate.getTimeLeft():0,r=y(this.waypointRef.current.style.transform),o=y(this.props.state.transform),i={startTime:performance.now(),duration:n-a,startCoord:r,endCoord:o,timingFunc:m,nodeStyle:this.waypointRef.current.style};this.draggedOnRAFTranslate=f(i)}}},{key:"render",value:function(){var t=this.isDragging?[this.state.transform,0]:this.hasDragged?[this.state.transform,this.props.state.transitionTime]:this.props.state.transitionTime?["translate(".concat(0,"px, ",0,"px)"),0]:[this.props.state.transform,this.props.state.transitionTime],e=Object(g.a)(t,2),n=e[0],a=e[1],o={transition:"transform ".concat(a,"ms ease"),WebkitTransition:"-webkit-transform ".concat(a,"ms ease"),transform:n,WebkitTransform:n,msTransform:n},i="route-waypoint__draggable"+(this.isDragging?" route-waypoint__draggable_dragging":""),s="route-waypoint__icon"+(this.isDragging?" route-waypoint__icon_dragging":"");return r.a.createElement("div",{className:"route-waypoint "+this.props.className,ref:this.routeWaypointRef},r.a.createElement("div",{className:i,style:o,ref:this.waypointRef},r.a.createElement("div",Object.assign({className:s,ref:this.iconRef},this.handleGesture)),r.a.createElement("div",{className:"route-waypoint__name"},this.props.state.name),r.a.createElement("button",{type:"button",className:"route-waypoint__button",ref:this.buttonRef,onClick:this.handleButtonClick})))}}]),e}(r.a.Component),x=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(o)))).state={text:""},n.inputRef=r.a.createRef(),n.handleChange=function(t){n.setState({text:t.target.value})},n.handleKeyDown=function(t){"Enter"===t.key&&!t.repeat&&t.target.value.trim()&&(n.props.handleEnter(t.target.value),n.setState({text:""}))},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.props.isMapLoaded&&(this.inputRef.current.focus(),this.inputRef.current.click())}},{key:"componentDidUpdate",value:function(t){t.isMapLoaded!==this.props.isMapLoaded&&(this.inputRef.current.focus(),this.inputRef.current.click())}},{key:"render",value:function(){return r.a.createElement("div",{className:this.props.className},r.a.createElement("input",{type:"text",placeholder:this.props.placeholder,autoComplete:"off",autoCorrect:"off",onChange:this.handleChange,onKeyDown:this.handleKeyDown,value:this.state.text,ref:this.inputRef,disabled:!this.props.isMapLoaded}))}}]),e}(r.a.Component),k=n(9),T=n.n(k),C=n(19),M=function(t){return function(e){return new Promise(function(n,a){t.abort=function(){n=null,a=null},e.then(function(t){n&&n(t)}).catch(function(t){a&&a(t)})})}},E=(n(116),n(117),function(t){function e(){return Object(s.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"centering-outer",style:{height:this.props.height}},r.a.createElement("div",{className:"centering-middle"},this.props.children))}}]),e}(r.a.Component)),R=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(o)))).state={isLoading:!0,error:null,markers:[],map:null,polyline:null,lastAction:null},n.isPolylineAnimating=!1,n.isGoogleApiLoaded="google"in window,n.isGeolocationSupported="geolocation"in navigator,n.googleMapRef=r.a.createRef(),n.googleMapApiKey="AIzaSyC-ij1b7n8H0QPCUPptFwUSFqzrTKbvXHc",n.markerColors={start:"https://maps.google.com/mapfiles/ms/icons/green-dot.png",default:"https://maps.google.com/mapfiles/ms/icons/yellow-dot.png",end:"https://maps.google.com/mapfiles/ms/icons/red-dot.png"},n.addMarker=function(t){var e,a=n.state.markers.length;return a?(e=n.markerColors.end,1!==a&&n.state.markers[a-1].marker.setIcon(n.markerColors.default)):e=n.markerColors.start,new window.google.maps.Marker({position:t,map:n.state.map,draggable:!0,icon:e})},n.reverseGeocode=function(){var t=Object(C.a)(T.a.mark(function t(e){var n;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=new window.google.maps.Geocoder,t.next=4,new Promise(function(t,a){n.geocode({location:e},function(e,n){"OK"===n?t(e[0]):a(n)})});case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",null);case 10:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e){return t.apply(this,arguments)}}(),n.updatePolyline=function(t){if(n.state.polyline&&n.state.polyline.setMap(null),t.length>1){var e=t.map(function(t){return t.marker.getPosition().toJSON()}),a=new window.google.maps.Polyline({path:e,geodesic:!0,strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2});return a.setMap(n.state.map),a}return null},n.dragPolylineAnimation=function(){n.isPolylineAnimating&&n.setState(function(t){return{polyline:n.updatePolyline(t.markers),lastAction:"POLYLINE"}},function(){return n.isPolylineAnimating=!1})},n.getLocation=Object(C.a)(T.a.mark(function t(){var e;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new Promise(function(t,e){navigator.geolocation.getCurrentPosition(function(e){return t(e)},function(){return e(Error("geolocation blocked"))})});case 3:return e=t.sent,t.abrupt("return",e);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}},t,this,[[0,7]])})),n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"getDefaultCenter",value:function(){return{lat:55.7558,lng:37.6173}}},{key:"updateMarkerIcon",value:function(t,e){0===e?t[e].marker.setIcon(this.markerColors.start):e===t.length-1?t[e].marker.setIcon(this.markerColors.end):e<t.length-1&&t[e].marker.setIcon(this.markerColors.default)}},{key:"componentDidMount",value:function(){var t=Object(C.a)(T.a.mark(function t(){var e,n,a,r,o,i,s;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.abortToken={abort:null},this.withCancel=M(this.abortToken),t.prev=2,this.isGoogleApiLoaded){t.next=7;break}return t.next=6,this.withCancel(this.getGoogleApi());case 6:this.isGoogleApiLoaded=!0;case 7:if(!this.isGeolocationSupported){t.next=21;break}return t.prev=8,t.next=11,this.withCancel(this.getLocation());case 11:n=t.sent,a=n.coords,r=a.latitude,o=a.longitude,e={lat:r,lng:o},t.next=21;break;case 18:t.prev=18,t.t0=t.catch(8),e=null;case 21:e||(e=this.getDefaultCenter()),i={center:e,zoom:8},s=new window.google.maps.Map(this.googleMapRef.current,i),this.setState({map:s}),this.props.onMapLoad(),t.next=31;break;case 28:t.prev=28,t.t1=t.catch(2),this.setState({error:t.t1});case 31:return t.prev=31,this.setState({isLoading:!1}),t.finish(31);case 34:case"end":return t.stop()}},t,this,[[2,28,31,34],[8,18]])}));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.abortToken.abort&&this.abortToken.abort()}},{key:"componentDidUpdate",value:function(t,e){var n,a=this,r=this.props.payload,o=r.id,i=r.action,s=r.name,c=r.newIndex,u=t.payload.id,l=null;if("ADD"===i&&o!==u){var d=this.state.map.getCenter().toJSON(),p=this.addMarker(d);p.addListener("drag",function(){a.isPolylineAnimating=!0,window.requestAnimationFrame(a.dragPolylineAnimation)});var g=new window.google.maps.InfoWindow;p.addListener("click",Object(C.a)(T.a.mark(function t(){var e,n,r;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=p.getPosition().toJSON(),t.next=3,a.reverseGeocode(e);case 3:n=t.sent,r='\n        <div class="route-map__popup">\n          <div class="route-map__popup__name">'.concat(s,"</div>\n          ").concat(n?'<div class="route-map__popup__address">'.concat(n.formatted_address,"</div>"):"","\n        </div>"),g.setContent(r),g.open(a.state.map,p);case 7:case"end":return t.stop()}},t,this)}))),l=[].concat(Object(h.a)(this.state.markers),[{id:o,marker:p}])}else if("DELETE"===i&&e.markers.length===this.state.markers.length){var m=this.state.markers.findIndex(function(t){return t.id===o});if(-1===m)return;this.state.markers[m].marker.setMap(null),m===(l=[].concat(Object(h.a)(this.state.markers.slice(0,m)),Object(h.a)(this.state.markers.slice(m+1)))).length&&0!==l.length?this.updateMarkerIcon(l,l.length-1):m||0===l.length||this.updateMarkerIcon(l,0)}else if("MOVE"===i&&this.state.markers[c].id!==o){var f=this.state.markers.findIndex(function(t){return t.id===o}),v=(l=Object(h.a)(this.state.markers)).splice(f,1)[0];l.splice(c,0,v);for(var y=Math.min(f,c);y<=Math.max(f,c);y++)this.updateMarkerIcon(l,y)}(l&&l.length!==this.state.markers.length||"MOVE"===i&&this.state.markers[c].id!==o)&&(n=this.updatePolyline(l),this.setState({markers:l,polyline:n,lastAction:i})),"POLYLINE"===this.state.lastAction&&this.setState({lastAction:null})}},{key:"getGoogleApi",value:function(){var t=Object(C.a)(T.a.mark(function t(){var e=this;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new Promise(function(t,n){var a=document.createElement("script"),r=e.googleMapApiKey;a.src="https://maps.googleapis.com/maps/api/js?key=".concat(r),a.type="text/javascript",a.async=!1,a.onload=function(e){return t("google api loaded")},a.onerror=function(t){return n(new Error(t))},document.body.appendChild(a)});case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),t.t0;case 9:case"end":return t.stop()}},t,this,[[0,6]])}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state.isLoading||this.state.error?{display:"none"}:{display:"block"};return r.a.createElement("div",{className:"route-map "+this.props.className},this.state.isLoading&&r.a.createElement(E,null,r.a.createElement("div",{className:"route-map__loading"},"Loading")),this.state.error&&r.a.createElement(E,null,r.a.createElement("div",{className:"route-map__error"},this.state.error.message)),r.a.createElement("div",{className:"route-map__map",style:t,ref:this.googleMapRef}))}}]),e}(r.a.Component);n(118);function O(t){return t.top<t.bottom&&t.left<t.right}function D(t){return O(t)?(t.bottom-t.top)*(t.right-t.left):null}function j(t,e){return function(t,e){return O(t)&&O(e)&&!(t.top>=e.bottom||t.bottom<=e.top||t.left>=e.right||t.right<=e.left)}(t,e)?{top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left),right:Math.min(t.right,e.right)}:null}var _=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(t=Object(l.a)(e)).call.apply(t,[this].concat(r)))).state={hasMoved:!1,isMaxWaypointsReached:!1,isMapLoaded:!1,waypoints:[],id:0,isTransitioning:!1,draggedIndex:null,mapPayload:{id:null,newIndex:null,action:"",name:""}},n.waypointsRects=[],n.transitionTime=300,n.isPointerSupported=Boolean(window.PointerEvent),n.handleEnter=function(t){n.setState(function(e){return 15===e.waypoints.length?{isMaxWaypointsReached:!0}:{waypoints:[].concat(Object(h.a)(e.waypoints),[{name:t,id:e.id,transform:"translate(".concat(0,"px, ",0,"px)"),transitionTime:n.transitionTime}]),id:e.id+1,mapPayload:{id:e.id,action:"ADD",name:t}}})},n.handleDelete=function(t){n.waypointsRects=n.waypointsRects.filter(function(e){return e.id!==t}),n.setState(function(e){return{waypoints:e.waypoints.filter(function(e){return e.id!==t}),isMaxWaypointsReached:!1,mapPayload:{id:t,action:"DELETE"}}})},n.setBaseRect=function(t,e){n.waypointsRects[t]=e},n.setDragged=function(t){n.setState({isTransitioning:!0,draggedCurrRect:n.waypointsRects[t],draggedCurrIndex:t,draggedIndex:t,mapPayload:{action:""}})},n.updateWaypoints=function(t){var e=n.state,a=e.hasMoved,r=e.draggedIndex,o=e.draggedCurrIndex,i=n.findDraggedOn(t);null!==i&&i!==o?n.handleMove(i):null===i&&a&&n.handleMove(r)},n.findDraggedOn=function(t){var e=t.x,a=t.y,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.33,o=n.state,i=o.waypoints,s=o.draggedIndex,c=null;return i.every(function(t,o){if(o===s)return!0;var i=n.waypointsRects[s],u={top:i.top+a,bottom:i.bottom+a,left:i.left+e,right:i.right+e},l=n.waypointsRects[o],d=j(l,u);return!(d&&D(d)>r*D(l))||(c=o,!1)}),c},n.handleMove=function(t){n.setState(function(e){var a,r=Object(h.a)(e.waypoints),o=e.draggedIndex,i=e.draggedCurrIndex,s=!0,c=o<t&&t<i||i<t&&t<o,u=o<i&&i<t||t<i&&i<o;if(!n.state.hasMoved||u){var l=i<t?n.waypointsRects[i+1].top-n.waypointsRects[i].top:n.waypointsRects[i-1].bottom-n.waypointsRects[i].bottom;a="translate(".concat(0,"px, ",-l,"px)")}else{if(!c&&t!==o)return;t===o&&(s=!1),a="translate(".concat(0,"px, ",0,"px)")}for(var d=t>i,g=i;d?g<=t:g>=t;d?g++:g--)g===o||c&&g===t||(r[g]=Object(p.a)({},r[g],{transform:a}));var m=t,f=e.waypoints[o].id;return{hasMoved:s,draggedCurrIndex:m,draggedCurrRect:n.waypointsRects[t],waypoints:r,mapPayload:{id:f,newIndex:t,action:"MOVE"}}})},n.handleMoveEnd=function(){n.setState(function(t){var e=Object(h.a)(t.waypoints),a=e.splice(n.state.draggedIndex,1)[0];e.splice(n.state.draggedCurrIndex,0,a);for(var r="translate3d(".concat(0,"px, ",0,"px, 0)"),o=Math.min(n.state.draggedCurrIndex,n.state.draggedIndex);o<=Math.max(n.state.draggedCurrIndex,n.state.draggedIndex);o++)e[o]=Object(p.a)({},e[o],{transform:r,transitionTime:0});return{hasMoved:!1,isTransitioning:!1,waypoints:e}})},n.handleMapLoad=function(){return n.setState({isMapLoaded:!0})},n}return Object(d.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidUpdate",value:function(t,e){if(!0===e.isTransitioning&&!1===this.state.isTransitioning){for(var n=Object(h.a)(this.state.waypoints),a=Math.min(this.state.draggedCurrIndex,this.state.draggedIndex);a<=Math.max(this.state.draggedCurrIndex,this.state.draggedIndex);a++)n[a].transitionTime=this.transitionTime;this.setState({waypoints:n})}}},{key:"render",value:function(){var t=this,e=this.state.waypoints.map(function(e,n){return r.a.createElement(b,{key:e.id.toString(),index:n,state:e,className:"map-route-creation__waypoint",handleDelete:t.handleDelete,handleMoveEnd:t.handleMoveEnd,setDragged:t.setDragged,draggedCurrRect:n===t.state.draggedIndex?t.state.draggedCurrRect:null,isTransitioning:t.state.isTransitioning,setBaseRect:t.setBaseRect,updateWaypoints:t.updateWaypoints})}),n="map-route-creation__waypoints ".concat(this.state.isDragStarted?"map-route-creation__waypoints_dragging":"");return r.a.createElement(E,{height:"100vh"},r.a.createElement("div",{className:"map-route-creation"},r.a.createElement("div",{className:"map-route-creation__content"},r.a.createElement(x,{className:"map-route-creation__input",handleEnter:this.handleEnter,placeholder:"\u041d\u043e\u0432\u0430\u044f \u0442\u043e\u0447\u043a\u0430 \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430",isMapLoaded:this.state.isMapLoaded}),r.a.createElement("div",{className:n},e),this.state.isMaxWaypointsReached&&r.a.createElement("div",{className:"map-route-creation__warning"},"15 \u0442\u043e\u0447\u0435\u043a \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c")),r.a.createElement(R,{className:"map-route-creation__map",payload:this.state.mapPayload,onMapLoad:this.handleMapLoad})))}}]),e}(r.a.Component),L=function(t){function e(){return Object(s.a)(this,e),Object(u.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(_,null))}}]),e}(a.Component);i.a.render(r.a.createElement(L,null),document.getElementById("root"))},70:function(t,e,n){t.exports=n(119)}},[[70,1,2]]]);
//# sourceMappingURL=main.c76aa033.chunk.js.map